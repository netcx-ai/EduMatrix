<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>课程详情</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="/static/layui/css/layui.css" media="all">
</head>
<body style="padding: 15px;">
    <div class="layui-card">
        <div class="layui-card-header">
            <h2>课程详情</h2>
        </div>
        <div class="layui-card-body">
            <table class="layui-table">
                <tbody>
                    <tr>
                        <td>课程名称</td>
                        <td>{$course.name}</td>
                        <td>课程代码</td>
                        <td>{$course.course_code|default='未设置'}</td>
                    </tr>
                    <tr>
                        <td>所属学校</td>
                        <td>{$course.school.name|default=''}</td>
                        <td>所属学院</td>
                        <td>{$course.college.name|default='未设置'}</td>
                    </tr>
                    <tr>
                        <td>负责教师</td>
                        <td>{$course.responsible_teacher.real_name|default='未分配'}</td>
                        <td>学分</td>
                        <td>{$course.credits|default='0'}</td>
                    </tr>
                    <tr>
                        <td>学时</td>
                        <td>{$course.hours|default='0'}</td>
                        <td>学期</td>
                        <td>{$course.semester|default='未设置'}</td>
                    </tr>
                    <tr>
                        <td>学年</td>
                        <td>{$course.academic_year|default='未设置'}</td>
                        <td>内容数量</td>
                        <td>{$course.create_count|default='0'}</td>
                    </tr>
                    <tr>
                        <td>浏览次数</td>
                        <td>{$course.view_count|default='0'}</td>
                        <td>排序</td>
                        <td>{$course.sort|default='0'}</td>
                    </tr>
                    <tr>
                        <td>公开性</td>
                        <td>{if $course.is_public==1}公开{else}私有{/if}</td>
                        <td>课程状态</td>
                        <td>
                            {if $course.status==1}启用{elseif $course.status==0}禁用{else}未知{/if}
                        </td>
                    </tr>
                    <tr>
                        <td>课程标签</td>
                        <td colspan="3">
                            {if condition="$course.tags && count($course.tags) > 0"}
                                {volist name="course.tags" id="tag"}
                                    <span class="layui-badge" style="background-color: {$tag.color}; margin-right: 5px;">{$tag.name}</span>
                                {/volist}
                            {else/}
                                <span class="layui-text-color">暂无标签</span>
                            {/if}
                        </td>
                    </tr>
                    <tr>
                        <td>创建时间</td>
                        <td>{$course.create_time}</td>
                        <td>更新时间</td>
                        <td>{$course.update_time}</td>
                    </tr>
                    <tr>
                        <td colspan="4">课程描述</td>
                    </tr>
                    <tr>
                        <td colspan="4">
                            {if $course.description}
                                {$course.description|nl2br}
                            {else}
                                <span style="color: #999;">暂无描述</span>
                            {/if}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="layui-form-item" style="margin-top: 20px; text-align: center;">
        <button type="button" class="layui-btn layui-btn-primary" onclick="closeWindow()">关闭</button>
        <button type="button" class="layui-btn" onclick="editCourse()">编辑</button>
    </div>
    
    <script src="/static/admin/js/jquery-3.7.1.min.js"></script>
    <script src="/static/layui/layui.js"></script>
    <script>
    layui.use(['layer'], function(){
        var layer = layui.layer;
        
        window.closeWindow = function() {
            var index = parent.layer.getFrameIndex(window.name);
            parent.layer.close(index);
        };
        
        window.editCourse = function() {
            var index = parent.layer.getFrameIndex(window.name);
            parent.layer.close(index);
            // 打开编辑页面
            parent.layer.open({
                type: 2,
                title: '编辑课程',
                shadeClose: true,
                shade: 0.3,
                maxmin: true,
                area: ['800px', '600px'],
                content: '/admin/course/edit?id={$course.id}'
            });
        };
    });
    </script>
</body>
</html> 