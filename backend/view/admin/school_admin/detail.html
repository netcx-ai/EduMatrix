<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>学校管理员详情</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="/static/layui/css/layui.css" media="all">
</head>
<body style="padding: 15px;">
    <div class="layui-card">
        <div class="layui-card-header">
            <h2>管理员详情</h2>
        </div>
        <div class="layui-card-body">
            <table class="layui-table">
                <tbody>
                    <tr>
                        <td>用户名</td>
                        <td>{$admin.username|default='-'}</td>
                        <td>真实姓名</td>
                        <td>{$admin.real_name|default='-'}</td>
                    </tr>
                    <tr>
                        <td>所属学校</td>
                        <td>{$admin.school.name|default='-'}</td>
                        <td>手机号</td>
                        <td>{$admin.phone|default='-'}</td>
                    </tr>
                    <tr>
                        <td>邮箱</td>
                        <td>{$admin.email|default='-'}</td>
                        <td>角色</td>
                        <td>
                            {if $admin.role == 'admin'}
                                <span class="layui-badge layui-bg-red">管理员</span>
                            {elseif $admin.role == 'dean'}
                                <span class="layui-badge layui-bg-orange">院长</span>
                            {elseif $admin.role == 'director'}
                                <span class="layui-badge layui-bg-green">主任</span>
                            {else}
                                <span class="layui-badge layui-bg-gray">未知</span>
                            {/if}
                        </td>
                    </tr>
                    <tr>
                        <td>职位</td>
                        <td>{$admin.position|default='-'}</td>
                        <td>部门</td>
                        <td>{$admin.department|default='-'}</td>
                    </tr>
                    <tr>
                        <td>状态</td>
                        <td>
                            {if $admin.status == 1}
                                <span class="layui-badge layui-bg-green">启用</span>
                            {elseif $admin.status == 0}
                                <span class="layui-badge">禁用</span>
                            {else}
                                <span class="layui-badge layui-bg-gray">未知</span>
                            {/if}
                        </td>
                        <td>登录次数</td>
                        <td>{$admin.login_count|default=0}</td>
                    </tr>
                    <tr>
                        <td>最后登录时间</td>
                        <td>{$admin.last_login_time|default='-'}</td>
                        <td>最后登录IP</td>
                        <td>{$admin.last_login_ip|default='-'}</td>
                    </tr>
                    <tr>
                        <td>创建时间</td>
                        <td>{$admin.create_time}</td>
                        <td>更新时间</td>
                        <td>{$admin.update_time}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="layui-form-item" style="margin-top: 20px; text-align: center;">
        <button type="button" class="layui-btn layui-btn-primary" onclick="closeWindow()">关闭</button>
        <button type="button" class="layui-btn" onclick="editAdmin({$admin.id})">编辑</button>
    </div>
    
    <script src="/static/admin/js/jquery-3.7.1.min.js"></script>
    <script src="/static/layui/layui.js"></script>
    <script>
    layui.use(['layer'], function(){
        var layer = layui.layer;
        
        window.closeWindow = function() {
            var index = parent.layer.getFrameIndex(window.name);
            parent.layer.close(index);
        };
        
        window.editAdmin = function(id){
            var index = parent.layer.getFrameIndex(window.name);
            parent.layer.close(index);
            // 打开编辑页面
            parent.layer.open({
                type: 2,
                title: '编辑管理员',
                shadeClose: true,
                shade: 0.3,
                maxmin: true,
                area: ['800px', '600px'],
                content: '/admin/school_admin/edit?id=' + id
            });
        };
    });
    </script>
</body>
</html> 